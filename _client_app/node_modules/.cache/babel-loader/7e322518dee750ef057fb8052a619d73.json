{"remainingRequest":"/Users/jorgevarela/Documents/dailytasks/node_modules/babel-loader/lib/index.js!/Users/jorgevarela/Documents/dailytasks/node_modules/eslint-loader/index.js??ref--13-0!/Users/jorgevarela/Documents/dailytasks/src/store/modules/auth.js","dependencies":[{"path":"/Users/jorgevarela/Documents/dailytasks/src/store/modules/auth.js","mtime":1608243737384},{"path":"/Users/jorgevarela/Documents/dailytasks/node_modules/cache-loader/dist/cjs.js","mtime":1607791222437},{"path":"/Users/jorgevarela/Documents/dailytasks/node_modules/babel-loader/lib/index.js","mtime":1607791221765},{"path":"/Users/jorgevarela/Documents/dailytasks/node_modules/eslint-loader/index.js","mtime":1607791229555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgdmFyIGF1dGggPSB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgc3RhdHVzOiAnJywKICAgIHJlZ2lzdGVyX3N0YXR1czogJycsCiAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgfHwgJycsCiAgICB1c2VyOiB7fQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzYXZlVG9rZW46IGZ1bmN0aW9uIHNhdmVUb2tlbihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBhdXRoX3JlcXVlc3Q6IGZ1bmN0aW9uIGF1dGhfcmVxdWVzdChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnbG9hZGluZyc7CiAgICB9LAogICAgYXV0aF9zdWNjZXNzOiBmdW5jdGlvbiBhdXRoX3N1Y2Nlc3Moc3RhdGUsIHRva2VuLCB1c2VyKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdzdWNjZXNzJzsKICAgICAgc3RhdGUudG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSB8fCAnJzsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9LAogICAgcmVnaXN0ZXJfc3RhdHVzOiBmdW5jdGlvbiByZWdpc3Rlcl9zdGF0dXMoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLnJlZ2lzdGVyX3N0YXR1cyA9IHZhbHVlOwogICAgfSwKICAgIGF1dGhfZXJyb3I6IGZ1bmN0aW9uIGF1dGhfZXJyb3Ioc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJ2Vycm9yJzsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnJzsKICAgICAgc3RhdGUudG9rZW4gPSAnJzsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgZGF0YSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgYXhpb3MucG9zdCgnL2xvZ2luJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgICB2YXIgdXNlciA9IHJlc3BvbnNlLmRhdGEudXNlcjsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTsKICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB0b2tlbjsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9zdWNjZXNzJywgdG9rZW4sIHVzZXIpOwogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb21taXQoJ2F1dGhfZXJyb3InKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKF9yZWYyLCBkYXRhKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgYXhpb3MucG9zdCgnL3JlZ2lzdGVyJywgewogICAgICAgICAgbmFtZTogZGF0YS5uYW1lLAogICAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsCiAgICAgICAgICBwYXNzd29yZDogZGF0YS5wYXNzd29yZAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgc3RhdHVzID0gJ2Vycm9yJzsKICAgICAgICAgIGNvbW1pdCgncmVnaXN0ZXJfc3RhdHVzJywgc3RhdHVzKTsKICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgdmFyIHN0YXR1cyA9ICdlcnJvcic7CiAgICAgICAgICBjb21taXQoJ3JlZ2lzdGVyX3N0YXR1cycsIHN0YXR1cyk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuICEhc3RhdGUudG9rZW47CiAgICB9LAogICAgYXV0aFN0YXR1czogZnVuY3Rpb24gYXV0aFN0YXR1cyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuc3RhdHVzOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/jorgevarela/Documents/dailytasks/src/store/modules/auth.js"],"names":["axios","auth","namespaced","state","status","register_status","token","localStorage","getItem","user","mutations","saveToken","auth_request","auth_success","value","auth_error","logout","removeItem","actions","login","data","commit","Promise","resolve","reject","post","then","response","setItem","defaults","headers","common","catch","error","register","name","email","password","getters","isAuthenticated","authStatus"],"mappings":"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","sourcesContent":["import axios from 'axios'\nexport const auth = {\n    namespaced: true,\n    state: {\n        status: '',\n        register_status: '',\n        token: localStorage.getItem('token') || '',\n        user: {}\n    },\n\n    mutations: {\n        saveToken(state, token) {\n            state.token = token\n        },\n        auth_request(state) {\n            state.status = 'loading'\n        },\n        auth_success(state, token, user) {\n            state.status = 'success'\n            state.token = localStorage.getItem('token') || ''\n            state.user = user\n        },\n        register_status(state, value) {\n            state.register_status = value\n        },\n        auth_error(state) {\n            state.status = 'error'\n        },\n        logout(state) {\n            state.status = ''\n            state.token = ''\n            localStorage.removeItem('token')\n        },\n    },\n\n    actions: {\n        login({ commit }, data) {\n\n            return new Promise((resolve, reject) => {\n                axios.post('/login', data)\n                    .then(response => {\n                        const token = response.data.token\n                        const user = response.data.user\n                        localStorage.setItem('token', token)\n                        axios.defaults.headers.common['Authorization'] = token\n                        commit('auth_success', token, user)\n                        resolve(response)\n                    })\n                    .catch(error => {\n                        commit('auth_error')\n                        localStorage.removeItem('token')\n                        reject(error)\n                    })\n            })\n        },\n        register({commit}, data) {\n            return new Promise((resolve, reject) => {\n                axios.post('/register', {\n                    name: data.name,\n                    email: data.email,\n                    password: data.password,\n                })\n                    .then(response => {\n                        let status = 'error'\n                        commit('register_status', status)\n                        resolve(response)\n                    })\n                    .catch(error => {\n                        let status = 'error'\n                        commit('register_status', status)\n                        localStorage.removeItem('token')\n                        reject(error)\n                    })\n            })\n        },\n\n\n    },\n    getters: {\n        isAuthenticated: state => !!state.token,\n        authStatus: state => state.status,\n    },\n\n};"]}]}